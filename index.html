<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Restock</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        h1, h2 {
            margin-bottom: 10px;
        }
        .summary, .completed-checks {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
        button {
            margin: 5px;
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #e0e0e0;
        }
        input[type="number"], input[type="date"] {
            padding: 5px;
            font-size: 16px;
            margin-right: 10px;
        }
        input[type="number"] {
            width: 60px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        table, th, td {
            border: 1px solid #ccc;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        input[type="checkbox"] {
            transform: scale(1.5);
        }
    </style>
</head>
<body>

    <h1>Inventory Restock</h1>

    <!-- Section selection screen -->
    <div id="sectionSelect">
        <h2>Select a Section to Restock</h2>
        <button onclick="startSection('drinks')">Drinks</button>
        <button onclick="startSection('wine')">Wine</button>
        <button onclick="startSection('beer')">Beer</button>
        <button onclick="startSection('cider')">Cider</button>
        <button onclick="startSection('shelfWine')">Shelf Wine</button>
        <button onclick="startSection('crisps')">Crisps</button>
    </div>

    <!-- Restock questions screen -->
    <div id="question" style="display: none;">
        <h2 id="currentItem">Loading...</h2>
        <input type="number" id="restockAmount" min="0" placeholder="Quantity">
        <input type="date" id="sellByDate" placeholder="Sell-By Date">
        <button onclick="submitAnswer()">Next</button>
        <button onclick="goBack()">Go Back</button>
        <button onclick="completeSection()">Complete</button>
        <button onclick="cancelSection()">Cancel</button>
    </div>

    <!-- Summary screen -->
    <div id="summary" class="summary" style="display: none;">
        <h2>Summary of Items to Restock</h2>
        <ul id="summaryList"></ul>
        <button onclick="startOver()">Start Over</button>
        <button onclick="downloadSellByDateItems()">Download Sell-By Date Items</button>
    </div>

    <!-- Completed Checks -->
    <div id="completedChecks" class="completed-checks">
        <h2>Completed Checks</h2>
        <table id="completedTable">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Sell-By Date</th>
                    <th>Restocked</th>
                </tr>
            </thead>
            <tbody id="completedList"></tbody>
        </table>
        <button onclick="clearCompletedChecks()">Clear Completed Checks</button>
        <input type="file" id="fileInput" onchange="checkExpiredItems(event)">
    </div>

    <script>
        const sections = {
            drinks: [
                "Robinson's Raspberry and Apple", "Robinson's BlackBerry and BlueBerry",
                "Ribena BlackCurrant", "Ribena Light BlackCurrant", "Oasis Citrus Punch",
                "Oasis Summer Fruits", "Original Canned Coke", "Coke Zero Sugar",
                "Diet Coke", "Bottled Diet Coke", "Diet No Caffeine Coke", "Pepsi",
                "Pepsi Electric", "Pepsi Max Cherry", "Pepsi Max Lemon", "Original Pepsi",
                "Vimto Juice", "Capri Sun Orange", "Fruit Shoot Blackcurrant",
                "Fruit Shoot Orange", "Rubicon Spring Blackberry and Raspberry",
                "Lipton Lemon Flavored Ice Tea", "Peach Ice Tea", "Vimto Fizzy",
                "Tango Orange", "Tango Mango", "Tango Cherry Blast", "Tango Raspberry Blast",
                "Dr. Pepper", "Original Coca-Cola Bottles", "Cherry Coca-Cola Bottle",
                "Lemon Coca-Cola Bottle", "Coca-Cola Zero Sugar Bottle", "Coca-Cola Zero Sugar Vanilla",
                "Coca-Cola Zero Sugar Lemon", "Coca-Cola Zero Sugar Cherry", "Fizzy Water",
                "Iron Brew", "Sprite", "7-Up", "Fanta", "Fanta 0 Sugar", "Fanta Fruit Twist",
                "Fanta Lemon", "Monster Nitro", "Monster 0 Sugar Energy", "Monster Energy Absolute Zero",
                "Monster Energy Ultra Paradise", "Monster Energy Zero Sugar", "Monster Juiced Mango Loco",
                "Monster Ozzy Lemonade", "Monster Ultra Golden Pineapple", "Monster Pipeline Punch",
                "Monster Pacific Punch", "Monster Monarch", "Big SmartWater", "Small SmartWater",
                "Ice Valley Water", "Volvic Touch Of Lemon And Lime", "Monster Energy Ultra Zero Sugar",
                "Monster Ultra Fiesta Mango", "Monster Ultra Peachy Tea", "Monster Ultra Robo",
                "Monster Ultra Watermelon", "Monster Chaotic", "Monster Ultra Strawberry Dreams",
                "Relentless Original", "Rockstar Guardian"
            ],
            wine: [
                "I Heart Prosecco", "Plaza Prosecco", "Frixtent Italian Rose", "Frixtent Prosecco",
                "Echo Falls Summer Berries", "Italian Blush", "I Heart Rose", "Barefoot White Zinfandel",
                "Trevento Malbec Rose", "La Vela Ferme", "Blossom Hill", "Yellowtail Chardonnay",
                "Yellowtail Pinot Grigio", "Wolf Blass Chardonnay", "Casillero del Diablo",
                "Pinot Grigio", "Sauvignon Blanc", "Calvet Prestige", "Calvet Macon Villages",
                "Marlborough Oyster Bay Sauvignon Blanc", "Calvet Chablis", "Quirky Bird Chenin Blanc",
                "Quirky Bird Sauvignon Blanc", "Hardys Sauvignon Blanc", "Campo Viejo Blanco",
                "Hardys Pinot Grigio", "Hardys Chardonnay", "Secretary Bird Blanc", "Lambrini",
                "Isla Negra", "I Heart Sauvignon Blanc", "I Heart Chardonnay", "I Heart Pinot Grigio",
                "Bin 161 Chardonnay", "Bin 161 Sauvignon Blanc", "Bin 161 Pinot Grigio", "Barefoot Pinot Grigio"
            ],
            beer: [
                "Corona Extra bottles", "Peroni bottles", "Coors Light pint cans",
                "Budweiser bottles", "Desperado bottles", "Desperado cans", "Moretti bottles",
                "Heineken bottles", "Peroni bottles", "San Miguel", "Stella Artois Unfiltered",
                "Old Speckled Hen", "Guinness Original", "Guinness", "The World's Best International Lager",
                "Hobgoblin Gold Beer", "John Smith's", "Big Bottle Budweiser", "Big Bottle Stella Artois",
                "Big Bottle Heineken", "Big Bottle Corona", "Peroni cans", "Stella Artois pint cans",
                "Budweiser pint cans", "Foster's pint cans", "1664 pint cans", "San Miguel bottles",
                "Tyskie bottles", "Madri bottles", "Peroni bottles", "Estrella bottles",
                "Cruzcampo bottles", "Desperado's single bottles", "Corona Extra", "Stella Artois",
                "Budweiser", "Foster's", "Heineken", "Birra Moretti", "Newcastle Brown Ale",
                "Doom Bar", "Old Crafty Hen", "Whitstable Bay", "London Pride", "Hobgoblin Gold Beer",
                "Carlsberg Pint Cans Silver", "Carlsberg Pint Cans Green", "Carlsberg", "Carling Box",
                "Carling Cans", "Red Stripe Cans", "Amstel Cans", "Madri Cans", "Cruzcampo Cans",
                "Stella Artois Box", "Strongbow Box", "Foster's Box", "Strongbow Dark Fruit Box", "Carlsberg Box"
            ],
            cider: [
                "Malibu Cola", "Funkin Strawberry Tequila", "Passion Fruit Martini",
                "Captain Morgan Spiced Gold Cola", "Smirnoff Vodka and Cranberry", "Smirnoff Vodka and Cola",
                "Jack Daniel's Coca-Cola", "Jack Daniel's Coca-Cola Zero Sugar", "Gordon's Gin and Tonic Pink",
                "Gordon's Gin and Tonic Green", "Gordon's Gin and Tonic Diet", "Southern Comfort Lemonade",
                "Black Grape Vodka", "Pimm's Lemonade", "Bombay Presse Citrus Collins",
                "Grey Goose Strawberry and Lemongrass", "Bacardi Mojito", "Bacardi Mango Mojito",
                "Four Loko", "Ice Smirnoff", "Blue VK", "Pink Hooch", "Thatcher's Haze",
                "Henry Weston's Vintage Cider", "Thatcher's Katy", "Thatcher's Apple and Blackcurrant",
                "Thatcher's Blood Orange Cider", "Bulmer's Crushed Red Berries and Lime",
                "Bulmer's Original Premium Cider", "Magners Irish Cider", "Berries and Cherries Old Mout Cider",
                "Kiwi and Lime Old Mout Cider", "Pineapple and Raspberry Old Mout Cider",
                "Copperberg Strawberry and Lime", "Copperberg Mixed Fruit", "Inches Medium Apple Cider",
                "Strongbow Tropical Cider", "Strongbow Cloudy Apple Cider", "Strongbow Dark Fruits",
                "Thatcher's Cloudy Lemon Cider", "Thatcher's Blood Orange Cider", "Thatcher's Rose Cider",
                "Cans of Strongbow", "Cans of Strongbow Strawberry Cider", "Cans of Inches Medium Cider"
            ],
            shelfWine: [
                "19 Crimes Red Wine", "19 Crimes The Uprising", "Trevento Malbec",
                "Trevento Malbec Private Reserve", "Diablo Dark Red", "Campo Viejo", "Campo Viejo Reserve",
                "Calvet", "Yellowtail Shiraz small bottle", "Casillero del Diablo small bottle",
                "Cockburn's Special Reserve Port", "Harvey's Solera Sherry", "I Heart Malbec",
                "McGuigan Black Label", "Jam Shed", "Harvest Mulled Wine", "Canti Prosecco",
                "I Heart Prosecco Ros√©", "Vintage Cadorino", "19 Crimes Revolutionary Ros√©",
                "19 Crimes Sauvignon Blanc", "Freixenet Italian Ros√©", "Freixenet Pinot Grigio",
                "Wolf Blass Cabernet Sauvignon", "Casillero del Diablo Cabernet Sauvignon",
                "Casillero del Diablo Malbec", "Casillero del Diablo Merlot", "Dark Horse",
                "La Vieille Ferme", "Calvet Prestige", "Jacob's Creek Merlot", "Jacob's Creek Shiraz",
                "Blossom Hill", "Tempranillo", "Lindeman's Merlot", "Brancott Estate",
                "Calvet Ros√©", "La Petite Chat", "Casillero del Diablo Ros√©", "Isla Negra Ros√©",
                "Gallo Family White Zinfandel", "Campo Viejo Ros√©", "Kumala Zenith",
                "Secretary Bird Merlot", "Yellowtail Malbec", "Yellowtail Merlot",
                "Yellowtail Shiraz", "Yellowtail Jammy Red", "Black Label Red", "Quirky Bird Merlot",
                "Quirky Bird Shiraz", "Hardys Shiraz", "Hardys Stamp", "Turner Road Merlot",
                "Calvet Merlot", "Ch√¢teauneuf-du-Pape Calvet", "Calvet M√¢con-Villages",
                "Le Petit Chat Malin", "Le Russe Cabernet Sauvignon", "Parato Ros√©", "Hardys Ros√©",
                "Jacob's Creek Shiraz", "I Heart Blush Pinot Grigio", "Jam Shed",
                "Blossom Hill White Zinfandel", "Small Bottle of Blossom Hill White Zinfandel",
                "Small Bottle of Blossom Hill Chardonnay", "Hardys Merlot",
                "Jam Shed Rich Jammy and Smooth Shiraz", "Jam Shed Malbec", "Jam Shed Tempranillo",
                "Isla Negra Merlot", "Bin 161 Merlot", "Bin 161 Shiraz", "I Heart Merlot",
                "I Heart Shiraz", "Barefoot Merlot", "Barefoot Malbec", "Barefoot Cabernet Sauvignon",
                "Barefoot Jammy Red", "Andantino Purple", "Andantino Ros√©", "Silent Peak",
                "Calvet M√¢con-Villages", "Villa Maria Sauvignon Blanc", "Calvet Prestige Sauvignon Blanc",
                "McGuigan Black Label Chardonnay", "McGuigan Black Label Sauvignon Blanc",
                "Oxford Landing Pinot Grigio", "Oxford Landing Chardonnay", "Hardys Sauvignon Blanc"
            ],
            crisps: [
                "Walker's Cheese and Onion", "Walker's Salt and Vinegar", "Mr. Porky Scratchings",
                "Mr. Porky Original Scratchings", "Small Pringles Texas Barbecue",
                "Small Pringles Sour Cream", "Small Pringles Original", "Popchips Barbecue",
                "Popchips Sour Cream", "Walker's Ready Salted", "Walker's Roast Chicken",
                "Walker's Prawn Cocktail", "McCoy's Flame Grilled Steak", "McCoy's Cheddar and Onion",
                "McCoy's Salt and Vinegar", "McCoy's Sizzling King Prawn", "Doritos Chili Heatwave",
                "Doritos Tangy Cheese", "Doritos Cool Original", "Walker's Baked Cheese and Onion",
                "Tyrell's Lightly Sea Salted", "Tyrell's Sweet Chili and Red Pepper",
                "Kettle's Salt and Balsamic Vinegar", "Kettle Mature Cheddar and Red Onion",
                "Mac's Paprika", "Mac's Pepperoni Feast", "Mac's Texas Barbecue", "Hula Hoops Salted",
                "Hula Hoops Barbecue Beef", "Disco Cheese and Onion", "Big Hula Hoops Barbecue Beef",
                "Monster Munch Roast Beef", "Monster Munch Pickled Onion", "Skips Prawn Cocktail",
                "Knickknacks Nice and Spicy", "Scampi Flavoured Fries", "Bacon Flavoured Fries",
                "Quaver's Cheese", "Quaver's Prawn Cocktail", "What's It's Really Cheesy",
                "Mini Cheddar's Original", "Mini Cheddar's Smoky BBQ", "Mini Cheddar's Red Leicester",
                "Wheat Crunchies Crispy Bacon", "Salt and Vinegar Squares", "Cheese and Onion Squares",
                "Royster's T-Bone Steak", "Pompom Bears", "Cheetos Twisted Sweet and Spicy Small Packet",
                "Cheetos Sweet and Spicy Big Packet", "Crispy Bacon Frazzles"
            ]
        };

        let currentItemIndex = 0;
        let checklistItems = {};
        let sellByDateItems = {};
        let currentSection = [];

        document.getElementById('restockAmount').addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                submitAnswer();
                event.preventDefault();
            }
        });

        function startSection(section) {
            currentSection = sections[section];
            currentItemIndex = 0;
            checklistItems = {};
            sellByDateItems = {};
            document.getElementById('sectionSelect').style.display = 'none';
            document.getElementById('question').style.display = 'block';
            askNextItem();
        }

        function submitAnswer() {
            const restockAmount = parseInt(document.getElementById('restockAmount').value, 10);
            const sellByDate = document.getElementById('sellByDate').value;
            const currentItem = currentSection[currentItemIndex];

            if (isNaN(restockAmount) || restockAmount <= 0) {
                alert("Please enter a valid quantity.");
                return;
            }

            if (sellByDate) {
                sellByDateItems[currentItem] = {
                    quantity: restockAmount,
                    sellByDate: sellByDate
                };
            } else {
                checklistItems[currentItem] = {
                    quantity: restockAmount
                };
            }

            currentItemIndex++;
            if (currentItemIndex < currentSection.length) {
                askNextItem();
            } else {
                displaySummary();
                saveCompletedChecks();
            }
        }

        function completeSection() {
            saveCompletedChecks();
            displaySummary();
        }

        function goBack() {
            if (currentItemIndex > 0) {
                currentItemIndex--;
                askNextItem();
            }
        }

        function cancelSection() {
            startOver();
        }

        function askNextItem() {
            document.getElementById('restockAmount').value = '';
            document.getElementById('sellByDate').value = '';
            document.getElementById('currentItem').textContent = `How many of ${currentSection[currentItemIndex]} need restocking?`;
            document.getElementById('restockAmount').focus();
        }

        function displaySummary() {
            const summary = document.getElementById('summary');
            const summaryList = document.getElementById('summaryList');
            summaryList.innerHTML = '';

            for (const [item, data] of Object.entries(checklistItems)) {
                const listItem = document.createElement("li");
                listItem.textContent = `${item}: ${data.quantity}`;
                summaryList.appendChild(listItem);
            }

            for (const [item, data] of Object.entries(sellByDateItems)) {
                const listItem = document.createElement("li");
                listItem.textContent = `${item}: ${data.quantity} (Sell-By: ${data.sellByDate})`;
                summaryList.appendChild(listItem);
            }

            document.getElementById('question').style.display = 'none';
            summary.style.display = 'block';
        }

        function saveCompletedChecks() {
            if (Object.keys(checklistItems).length === 0 && Object.keys(sellByDateItems).length === 0) return;

            const completedList = document.getElementById('completedList');
            completedList.innerHTML = '';  // Clear previous entries

            for (const [item, data] of Object.entries(checklistItems)) {
                const row = document.createElement("tr");

                const itemNameCell = document.createElement("td");
                itemNameCell.textContent = item;
                row.appendChild(itemNameCell);

                const itemQuantityCell = document.createElement("td");
                itemQuantityCell.textContent = data.quantity;
                row.appendChild(itemQuantityCell);

                const sellByDateCell = document.createElement("td");
                sellByDateCell.textContent = "N/A";
                row.appendChild(sellByDateCell);

                const restockedCell = document.createElement("td");
                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                restockedCell.appendChild(checkbox);
                row.appendChild(restockedCell);

                completedList.appendChild(row);
            }

            for (const [item, data] of Object.entries(sellByDateItems)) {
                const row = document.createElement("tr");

                const itemNameCell = document.createElement("td");
                itemNameCell.textContent = item;
                row.appendChild(itemNameCell);

                const itemQuantityCell = document.createElement("td");
                itemQuantityCell.textContent = data.quantity;
                row.appendChild(itemQuantityCell);

                const sellByDateCell = document.createElement("td");
                sellByDateCell.textContent = data.sellByDate;
                row.appendChild(sellByDateCell);

                const restockedCell = document.createElement("td");
                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                restockedCell.appendChild(checkbox);
                row.appendChild(restockedCell);

                completedList.appendChild(row);
            }

            checklistItems = {};
            sellByDateItems = {};
            currentSection = [];
        }

        function downloadSellByDateItems() {
            let textContent = "Item,Quantity,Sell-By Date\n";
            for (const [item, data] of Object.entries(sellByDateItems)) {
                textContent += `${item},${data.quantity},${data.sellByDate}\n`;
            }

            const blob = new Blob([textContent], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'sell_by_date_items.txt';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function checkExpiredItems(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const contents = e.target.result;
                const lines = contents.split('\n').slice(1); // Skip header

                const expiredItems = [];
                const today = new Date();

                lines.forEach(line => {
                    const [item, , sellByDate] = line.split(',');
                    if (!item || !sellByDate) return;

                    const itemDate = new Date(sellByDate);
                    if (itemDate < today) {
                        expiredItems.push(item);
                    }
                });

                if (expiredItems.length > 0) {
                    alert(`The following items have expired: \n${expiredItems.join('\n')}`);
                } else {
                    alert("No expired items found.");
                }
            };

            reader.readAsText(file);
        }

        function startOver() {
            document.getElementById('sectionSelect').style.display = 'block';
            document.getElementById('question').style.display = 'none';
            document.getElementById('summary').style.display = 'none';
            checklistItems = {};
            sellByDateItems = {};
            currentSection = [];
            currentItemIndex = 0;
        }

        function clearCompletedChecks() {
            const completedList = document.getElementById('completedList');
            completedList.innerHTML = '';
        }

        // Initialize the page by displaying the section selection screen
        startOver();
    </script>

</body>
</html>
